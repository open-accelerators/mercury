# camel-k: language=yaml
# camel-k: open-api=CustomerCreditRating.json
# camel-k: dependency=mvn:com.redhat.mercury:customer-offer-common:1.0.1-SNAPSHOT

- from:
    uri: direct:Initiate
    steps:
      - unmarshal:
          protobuf:
            instance-class: com.redhat.mercury.customeroffer.api.crcustomerofferprocedureservice.CrCustomerOfferProcedureService.InitiateRequest
            content-type-format: json
      - to:
          uri: grpc://{{mercury.binding.service.host}}:{{mercury.binding.service.port}}/com.redhat.mercury.customeroffer.api.crcustomerofferprocedureservice.CRCustomerOfferProcedureService?synchronous=true&method=Initiate
      - marshal:
          protobuf:
            instance-class: com.redhat.mercury.customeroffer.InitiateCustomerOfferProcedureResponseOuterClass.InitiateCustomerOfferProcedureResponse
            content-type-format: json
